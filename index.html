<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homecoming</title>
    <!-- BOOTSTRAP -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="css/index.css">
</head>

<body>
    <div class="container" align="center" id="content">
        <div id="content">
            <h2 id="page-title">LeoDaWeeb Homecoming</h2>
            <div id="amazing">
                <button id="btn" onclick="playMusic()">Press here and you won't be dissapointed</button>
            </div>
            <h5 id="little-label">LeoDaWeeb will be home in:</h5>
            <div class="row justify-content-center">
                <div class="col- timer-circle" id="days-timer">

                </div>
                <div class="col- timer-circle" id="hours-timer">

                </div>
                <div class="col- timer-circle" id="mins-timer">

                </div>
                <div class="col- timer-circle" id="secs-timer">

                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col- timer-label" id="days-timer-label">
                    Days
                </div>
                <div class="col- timer-label" id="hours-timer-label">
                    Hours
                </div>
                <div class="col- timer-label" id="mins-timer-label">
                    Minutes
                </div>
                <div class="col- timer-label" id="secs-timer-label">
                    Seconds
                </div>
            </div>
            <div id="seconds-js-animation-wrapper">
                <span id="seconds-js-animation"></span>
            </div>
        </div>
    </div>
    <script>
        setInterval(() => {
            let countDownDate = new Date("Dec 10, 2021 19:30:00").getTime();
            let now = new Date().getTime();
            let timeleft = countDownDate - now;

            let days = Math.floor(timeleft / (1000 * 60 * 60 * 24));
            let hours = Math.floor((timeleft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            let minutes = Math.floor((timeleft % (1000 * 60 * 60)) / (1000 * 60));
            let seconds = Math.floor((timeleft % (1000 * 60)) / 1000);

            document.getElementById('days-timer').textContent = days
            document.getElementById('hours-timer').textContent = hours
            document.getElementById('mins-timer').textContent = minutes
            document.getElementById('secs-timer').textContent = seconds

            let secondsAsDots = ''

            for (let i = 0; i < seconds; i++) {
                secondsAsDots += '.'
            }

            document.getElementById('seconds-js-animation').textContent = secondsAsDots

        }, 1000)

        let music = new Audio('./resources/music.mp3')
        function playMusic() {
            if (!music.paused) {
                return
            }
            music.volume = 1
            music.play()
            document.getElementById('btn').style.animation = 'btntran 33s, music 530ms 170ms infinite'
            document.getElementById('btn').textContent = ''
            setTimeout(() => {
                let musicLowerVolume = setInterval(() => {
                    music.volume -= 0.05
                }, 100);
                setTimeout(() => {
                    clearInterval(musicLowerVolume)
                }, 2500)
            }, 29980)
            setTimeout(() => {
                music.pause()
                music.currentTime = 0
                document.getElementById('btn').style.animation = 'none'
                document.getElementById('btn').textContent = 'Press here and you won\'t be dissapointed'
            }, 33050)
        }

    </script>
</body>

</html>